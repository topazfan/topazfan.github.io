# Jetty 服务模型

jetty 通过NIO模型接受请求，将请求机器tcp链接channel一起打包放入全局队列。由jetty线程统一进行处理。
[参见源码解读](https://cloud.tencent.com/developer/article/1598241)

## 出现Broken pipe 和 reset by peer得原因

最近线上发现很多得这类异常。导致http接口调用得超时问题。
经过排查发现，其实http链接建立后，由于代码处理性能问题，导致得队列保存的请求时间太长导致得channel通道早已关闭，在实际业务处理时发现通道关闭无法继续处理。
解决方案：
1. 优化请求业务代码得处理性能问题（有得地方处理时间阻塞数分钟，导致大量请求积压在队列里面）
2. 增加处理线程数。（还是以第一个方案为主)
